
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2.8. Generalized inverses &#8212; Linear Algebra for Data Workbook</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2.9. Homework 3" href="hw03.html" />
    <link rel="prev" title="2.7. Surjective Functions and Right Inverses" href="chap2_surjective-functions-and-right-inverses.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Linear Algebra for Data Workbook</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../overview.html">
   Welcome to Stat 89A
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Background
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../00_Background/python_overview.html">
   1. (CH0): Python 101
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../00_Background/basics.html">
     1.1. The Basics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../00_Background/numpy.html">
     1.2. NumPy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../00_Background/plotting.html">
     1.3. MatPlotLib
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../00_Background/playground0.html">
     1.4. Play Ground
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../00_Background/hw0.html">
     1.5. Homework 0: Due Sunday January 24, 2021, 11:59 PM CA time
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Introduction and Overview
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="chap1_introduction_header.html">
   1. (CH1): Introduction and Overview
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="chap1_overview.html">
     1.1. Linear Algebra for Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="chap1_examples.html">
     1.2. Examples
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="chap2_algebras_header.html">
   2. (CH2): Algebra, algebras, and functions
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="chap2_sets.html">
     2.1. Sets and Set Algebra
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="chap2_basic-table-operations.html">
     2.2. Data Frames and Set Operations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="hw01.html">
     2.3. Homework 1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="chap2_functions-and-compositions.html">
     2.4. Functions and Compositions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="hw02.html">
     2.5. Homework 2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="chap2_injective-functions-and-left-inverses.html">
     2.6. Injective Functions and Left Inverses
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="chap2_surjective-functions-and-right-inverses.html">
     2.7. Surjective Functions and Right Inverses
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     2.8. Generalized inverses
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="hw03.html">
     2.9. Homework 3
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="../_sources/10_Overview/chap2_generalized-inverses.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/10_Overview/chap2_generalized-inverses.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/erichson/LinearAlgebra/master?urlpath=tree/10_Overview/chap2_generalized-inverses.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#left-inverses-are-generalized-inverses">
   2.8.1. Left inverses are generalized inverses
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#right-inverses-are-generalized-inverses">
   2.8.2. Right inverses are generalized inverses
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#a-function-with-a-generalized-inverse-but-no-left-or-right-inverse">
   2.8.3. A function with a generalized inverse, but no left or right inverse
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#another-example-of-a-generalized-inverse">
   2.8.4. Another example of a generalized inverse
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="generalized-inverses">
<h1><span class="section-number">2.8. </span>Generalized inverses<a class="headerlink" href="#generalized-inverses" title="Permalink to this headline">¶</a></h1>
<p>We have seen examples of left inverses for injective functions and right inverses for surjective functions.
These left/right inverses are not inverses in full sense of the word, but they are functions that have the effect of “undoing” the action of a function (for left inverses) or doing something that the function “undoes” (for right inverses).</p>
<p>We have also seen that left/right inverses have an interesting property when they are applied on the “other side,” i.e., on the right/left, respectively: they are idempotent.
Thus, they act as an identity when restricted to the image (of the function or right inverse, respectively).</p>
<p>If a function <span class="math notranslate nohighlight">\(f:A\to B\)</span> is neither injective nor surjective, then neither a left nor a right inverse exists.
However, we can still have a type of inverse called a <em>generalized inverse</em>.
A generalized inverse of a function <span class="math notranslate nohighlight">\(f:A\to B\)</span> is a function <span class="math notranslate nohighlight">\(g:B\to A\)</span> such that <span class="math notranslate nohighlight">\(g \circ f \circ g = g\)</span> and <span class="math notranslate nohighlight">\(f\circ g\circ f = f\)</span>.</p>
<ul class="simple">
<li><p>The property <span class="math notranslate nohighlight">\(g \circ f \circ g = g\)</span> is a generalization of the left inverse condition that <span class="math notranslate nohighlight">\(g \circ f = I_A\)</span>.</p></li>
<li><p>The property <span class="math notranslate nohighlight">\(f\circ g\circ f = f\)</span> is a generalization of the right inverse condition that <span class="math notranslate nohighlight">\(f \circ g = I_B\)</span>.</p></li>
</ul>
<p>Interestingly, generalized inverses are easier to work with than left/right inverses.</p>
<ul class="simple">
<li><p>Any left inverse of a function <span class="math notranslate nohighlight">\(f\)</span> satisfies both generalized inverse conditions.</p></li>
<li><p>Any right inverse of a function <span class="math notranslate nohighlight">\(f\)</span> satisfies both generalized inverse conditions.</p></li>
<li><p>If a function <span class="math notranslate nohighlight">\(f\)</span> and a generalized inverse <span class="math notranslate nohighlight">\(g\)</span> of that function are <em>not</em> restricted to their images, then their product (in either order, i.e., both <span class="math notranslate nohighlight">\(f \circ g\)</span> and <span class="math notranslate nohighlight">\(g \circ f\)</span>) is idempotent.</p></li>
<li><p>If a function <span class="math notranslate nohighlight">\(f\)</span> and a generalized inverse <span class="math notranslate nohighlight">\(g\)</span> of that function are restricted to their images, then their product (in either order, i.e., both <span class="math notranslate nohighlight">\(f \circ g\)</span> and <span class="math notranslate nohighlight">\(g \circ f\)</span>) is an Identity.</p></li>
</ul>
<p>Generalized inverses can be illustrated using the table operations we’ve seen before.
However, these examples tend to get messy when dealing with domains and ranges.
(The problem is not conceptual.  It’s just that dataframes were not designed to do this.)
For that reason, we will stick to simple numerical examples in this section.
However, you should keep in mind that the concepts do apply to the data frame perspective that we’ve worked with.</p>
<div class="section" id="left-inverses-are-generalized-inverses">
<h2><span class="section-number">2.8.1. </span>Left inverses are generalized inverses<a class="headerlink" href="#left-inverses-are-generalized-inverses" title="Permalink to this headline">¶</a></h2>
<p>The first fact which we will study is that if <span class="math notranslate nohighlight">\(f\)</span> has a left inverse <span class="math notranslate nohighlight">\(g\)</span>, then this left inverse is also a generalized inverse.
We can see this algebraically, since <span class="math notranslate nohighlight">\(g\circ f\)</span> is the identity function on <span class="math notranslate nohighlight">\(A\)</span>.
Thus, we have that
\begin{equation*}
f\circ g \circ f = f\circ \text{Id}_A = f
\quad
\mbox{and}
\quad
g\circ f \circ g = \text{Id}_B g = g .
\end{equation*}
Let’s look at an example of a left inverse from one of the previous workbooks.</p>
<p>Recall the function <span class="math notranslate nohighlight">\(f:\mathbb{Z}\to\mathbb{R}\)</span>, where <span class="math notranslate nohighlight">\(\mathbb{Z} = \{\dots, -2,-1,0,1,2,\dots\}\)</span> is the set of integers, and <span class="math notranslate nohighlight">\(\mathbb{R}\)</span> is the set of real numbers.
We define the function <span class="math notranslate nohighlight">\(f\)</span> as follows: for any integer <span class="math notranslate nohighlight">\(z\in \mathbb{Z}\)</span>, let <span class="math notranslate nohighlight">\(f(z)\)</span> be a random number in the interval <span class="math notranslate nohighlight">\((z-1/2, z+1/2)\)</span>.
Here is a python function which does this.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># set random seed for reproducibility</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=-.</span><span class="mi">5</span><span class="p">,</span> <span class="n">high</span><span class="o">=.</span><span class="mi">5</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">z</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">z</span> <span class="o">+</span> <span class="n">r</span>
</pre></div>
</div>
</div>
</div>
<p>As we saw, a natural left inverse for this function is the function <span class="math notranslate nohighlight">\(g:\mathbb{R}\to\mathbb{Z}\)</span> which rounds a real number <span class="math notranslate nohighlight">\(x\)</span> to the nearest integer.
Here is a python function which does this.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">rint</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Our claim is that, since <span class="math notranslate nohighlight">\(g\)</span> is a left inverse for <span class="math notranslate nohighlight">\(f\)</span>, it must also be a generalized inverse. To check this numerically, we want to check that <span class="math notranslate nohighlight">\((f\circ g \circ f)(z) = f(z)\)</span> for any integer <span class="math notranslate nohighlight">\(z\)</span>. Let’s see a few examples.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;f(-5) = </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(f o g o f)(-5) = </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">))))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;f(2) = </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(f o g o f)(2) = </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">))))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;f(14) = </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">(</span><span class="mi">14</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(f o g o f)(14) = </span><span class="si">%f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">14</span><span class="p">))))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>f(-5) = -4.951186
(f o g o f)(-5) = -4.951186

f(2) = 2.048814
(f o g o f)(2) = 2.048814

f(14) = 14.048814
(f o g o f)(14) = 14.048814
</pre></div>
</div>
</div>
</div>
<p>Indeed, as expected, we have that <span class="math notranslate nohighlight">\((f \circ g \circ f)(z) = f(z)\)</span>.</p>
<p>We likewise have that <span class="math notranslate nohighlight">\((g \circ f \circ g)(z) = g(z)\)</span>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;g(-5.7) = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">g</span><span class="p">(</span><span class="o">-</span><span class="mf">5.7</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(g o f o g)(-5.7) = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">g</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="o">-</span><span class="mf">5.7</span><span class="p">))))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;g(2.1) = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">g</span><span class="p">(</span><span class="mf">2.1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(g o f o g)(2.1) = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">g</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="mf">2.1</span><span class="p">))))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;g(14.2) = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">g</span><span class="p">(</span><span class="mf">14.2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(g o f o g)(14.2) = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">g</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="mf">14.2</span><span class="p">))))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>g(-5.7) = -6
(g o f o g)(-5.7) = -6

g(2.1) = 2
(g o f o g)(2.1) = 2

g(14.2) = 14
(g o f o g)(14.2) = 14
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="right-inverses-are-generalized-inverses">
<h2><span class="section-number">2.8.2. </span>Right inverses are generalized inverses<a class="headerlink" href="#right-inverses-are-generalized-inverses" title="Permalink to this headline">¶</a></h2>
<p>Similar to left inverses, if a function <span class="math notranslate nohighlight">\(f:A\to B\)</span> has a right inverse <span class="math notranslate nohighlight">\(g\)</span>, then this function must also be a generalized inverse.
In this case, <span class="math notranslate nohighlight">\(f\circ g\)</span> is the identity function on <span class="math notranslate nohighlight">\(B\)</span>.
Thus, we have that
\begin{equation*}
f\circ g \circ f = f\circ \text{Id}_A = f
\quad
\mbox{and}
\quad
g\circ f \circ g = \text{Id}_B g = g .
\end{equation*}
Let’s now use one of our examples from the workbook on surjective functions and right inverses to verify this.</p>
<p>Consider again the surjective function <span class="math notranslate nohighlight">\(f:\mathbb{R}\to\mathbb{Z}\)</span>, which maps any real number <span class="math notranslate nohighlight">\(x\)</span> to an integer <span class="math notranslate nohighlight">\(f(x)\)</span> by rounding <span class="math notranslate nohighlight">\(x\)</span> to the nearest integer.
In python,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">rint</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We showed that there are many possible right inverses for this function, but one is the function <span class="math notranslate nohighlight">\(g(z)\)</span> which takes an integer <span class="math notranslate nohighlight">\(z\)</span>, and returns the real number <span class="math notranslate nohighlight">\(z-.1\)</span>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">z</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">z</span><span class="o">-.</span><span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s verify that this function satisfies the first generalized inverse condition <span class="math notranslate nohighlight">\((f\circ g \circ f) = f\)</span> on a few test points.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;f(-5.314) = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">(</span><span class="o">-</span><span class="mf">5.314</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(f o g o f)(-5.314) = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="o">-</span><span class="mf">5.314</span><span class="p">))))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;f(2.67) = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">(</span><span class="mf">2.67</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(f o g o f)(2.67) = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mf">2.67</span><span class="p">))))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;f(18.45) = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">(</span><span class="mf">18.45</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(f o g o f)(18.45) = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mf">18.45</span><span class="p">))))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>f(-5.314) = -5
(f o g o f)(-5.314) = -5

f(2.67) = 3
(f o g o f)(2.67) = 3

f(18.45) = 18
(f o g o f)(18.45) = 18
</pre></div>
</div>
</div>
</div>
<p>It is also easy to show that <span class="math notranslate nohighlight">\(g \circ f \circ g = g\)</span>.</p>
<p>Thus, the function <span class="math notranslate nohighlight">\(g\)</span> is indeed a generalized inverse for <span class="math notranslate nohighlight">\(f\)</span>.</p>
</div>
<div class="section" id="a-function-with-a-generalized-inverse-but-no-left-or-right-inverse">
<h2><span class="section-number">2.8.3. </span>A function with a generalized inverse, but no left or right inverse<a class="headerlink" href="#a-function-with-a-generalized-inverse-but-no-left-or-right-inverse" title="Permalink to this headline">¶</a></h2>
<p>In the last two examples, we saw that left and right inverses are automatically also generalized inverses.
However, a function need not be injective or surjective in order to have a generalized inverse.
For example,
let’s consider the sets
<span class="math notranslate nohighlight">\( A = \{1,2,3,4,5\} \)</span>
and
<span class="math notranslate nohighlight">\( B = \{a,b,c\} \)</span>; and
let’s consider the function <span class="math notranslate nohighlight">\(f\)</span> given in the following table.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p><span class="math notranslate nohighlight">\(x\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(f(x)\)</span></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(1\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(a\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(2\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(b\)</span></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(3\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(a\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(4\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(b\)</span></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(5\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(b\)</span></p></td>
</tr>
</tbody>
</table>
<p>This function is neither injective (for example, <span class="math notranslate nohighlight">\(1\)</span> and 3 map to the same output) nor surjective (no element maps to <span class="math notranslate nohighlight">\(c\)</span>).
However, we can still construct a function <span class="math notranslate nohighlight">\(g:B\to A\)</span> which is a generalized inverse for <span class="math notranslate nohighlight">\(f\)</span>.
First, let’s implement the function <span class="math notranslate nohighlight">\(f\)</span> in python.
A natural way to do this is with a dictionary.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span><span class="s1">&#39;b&#39;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>We can access the value of, say, <span class="math notranslate nohighlight">\(f(1)\)</span> with the following</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;a&#39;
</pre></div>
</div>
</div>
</div>
<p>Consider the function <span class="math notranslate nohighlight">\(g\)</span> defined in the following table</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p><span class="math notranslate nohighlight">\(y\)</span></p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(g(y)\)</span></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(a\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(1\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(b\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2\)</span></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(c\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(2\)</span></p></td>
</tr>
</tbody>
</table>
<p>This is indeed a valid function on the set <span class="math notranslate nohighlight">\(B\)</span>.
Let’s implement it in python in another dictionary:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Now let’s check whether this function satisfies
$<span class="math notranslate nohighlight">\(
f\circ g\circ f = f
\)</span><span class="math notranslate nohighlight">\(
for all inputs \)</span>x\in A$.
We can do this with the following code:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;f(</span><span class="si">%i</span><span class="s1">) = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(f o g o f)(</span><span class="si">%i</span><span class="s1">) = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">f</span><span class="p">[</span><span class="n">g</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="n">x</span><span class="p">]]]))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>f(1) = a
(f o g o f)(1) = a

f(2) = b
(f o g o f)(2) = b

f(3) = a
(f o g o f)(3) = a

f(4) = b
(f o g o f)(4) = b

f(5) = b
(f o g o f)(5) = b
</pre></div>
</div>
</div>
</div>
<p>As we can see from the output, we do indeed have that <span class="math notranslate nohighlight">\((f\circ g \circ f)(x) = f(x)\)</span> for all <span class="math notranslate nohighlight">\(x\in A\)</span>.
Similarly, we can also confirm that <span class="math notranslate nohighlight">\(g \circ f \circ g = g\)</span>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;g(</span><span class="si">%s</span><span class="s1">) = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">g</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(g o f o g)(</span><span class="si">%s</span><span class="s1">) = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">g</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="n">g</span><span class="p">[</span><span class="n">x</span><span class="p">]]]))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>g(a) = 1
(g o f o g)(a) = 1

g(b) = 2
(g o f o g)(b) = 2

g(c) = 2
(g o f o g)(c) = 2
</pre></div>
</div>
</div>
</div>
<p>So, <span class="math notranslate nohighlight">\(g\)</span> is a generalized inverse for <span class="math notranslate nohighlight">\(f\)</span>, even though <span class="math notranslate nohighlight">\(f\)</span> is neither injective nor surjective.</p>
</div>
<div class="section" id="another-example-of-a-generalized-inverse">
<h2><span class="section-number">2.8.4. </span>Another example of a generalized inverse<a class="headerlink" href="#another-example-of-a-generalized-inverse" title="Permalink to this headline">¶</a></h2>
<p>Here we give a more realistic example of a function with a generalized inverse.</p>
<p>Consider the function <span class="math notranslate nohighlight">\(f:\mathbb{R}\to \mathbb{R}\)</span> defined as follows:
$<span class="math notranslate nohighlight">\(
f(x) = \begin{cases}-1 &amp; \text{if } x&lt;-1\\ x^3 &amp;\text{if }-1\leq x\leq 1\\ 1&amp;\text{if }x&gt;1 \end{cases}
\)</span>$</p>
<p>Here is this function written in python.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span><span class="o">&lt;-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">elif</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">**</span><span class="mi">3</span>

<span class="n">xx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mf">2.01</span><span class="p">,</span><span class="o">.</span><span class="mi">01</span><span class="p">)</span>
<span class="n">fx</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xx</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">fx</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;f(x)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 640x480 with 1 Axes&gt;
</pre></div>
</div>
</div>
</div>
<p>This function is neither injective nor surjective.
Indeed, note that for the points <span class="math notranslate nohighlight">\(x=-1.5, x'=-2\)</span>, <span class="math notranslate nohighlight">\(f(x) = f(x')\)</span>, even though <span class="math notranslate nohighlight">\(x\neq x'\)</span>.
Therefore <span class="math notranslate nohighlight">\(f\)</span> cannot be injective.
Moreover, there is no <span class="math notranslate nohighlight">\(x\in \mathbb{R}\)</span> such that <span class="math notranslate nohighlight">\(f(x)=-2\)</span>.
Therefore <span class="math notranslate nohighlight">\(f\)</span> also cannot be surjective.
As a consequence, <span class="math notranslate nohighlight">\(f\)</span> does not have any left or right inverses.
However, it does have a generalized inverse.
For example, consider the function <span class="math notranslate nohighlight">\(g(x) = x^{1/3}\)</span> (i.e., the cube-root of <span class="math notranslate nohighlight">\(x\)</span>).
Let’s see what happens when we compute <span class="math notranslate nohighlight">\(f\circ g\circ f\)</span>.
We have for <span class="math notranslate nohighlight">\(x&lt;-1\)</span>, we get
\begin{equation*}
f(g(f(x))) = f(g(-1)) = f(-1) = -1 = f(x)
\end{equation*}
Similarly, for <span class="math notranslate nohighlight">\(x&gt;1\)</span>, we get
\begin{equation*}
f(g(f(x))) = f(g(1)) = f(1) = 1 = f(x)
\end{equation*}
Finally, if <span class="math notranslate nohighlight">\(-1\leq x\leq 1\)</span>, we get
\begin{equation*}
f(g(f(x))) = f(g(x^3)) = f((x^3)^{1/3}) = f(x)
\end{equation*}
Thus, we have that <span class="math notranslate nohighlight">\(f\circ g\circ f = f\)</span>, and so <span class="math notranslate nohighlight">\(g\)</span> is a generalized inverse for <span class="math notranslate nohighlight">\(f\)</span>.
Let’s plot <span class="math notranslate nohighlight">\(f\circ g \circ f\)</span> and see why this is the case.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">g</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="c1"># use this trick to compute the cube root in python: x^(1/3) = sign(x)*|x|^(1/3)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mf">3.</span><span class="p">)</span>

<span class="n">fgfx</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="n">g</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xx</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">fgfx</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;(f o g o f)(x)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/chap2_generalized-inverses_27_0.png" src="../_images/chap2_generalized-inverses_27_0.png" />
</div>
</div>
<p>Indeed, we see visually that the plot of <span class="math notranslate nohighlight">\(f\circ g\circ f\)</span> is the same as the plot of <span class="math notranslate nohighlight">\(f\)</span>, again verifying that these two functions are the same.
If we plotted <span class="math notranslate nohighlight">\(g \circ f \circ g\)</span>, we would see that it equals <span class="math notranslate nohighlight">\(g\)</span>.
Therefore, <span class="math notranslate nohighlight">\(g\)</span> is a generalized inverse for <span class="math notranslate nohighlight">\(f\)</span>.</p>
<p>Is this the only generalized inverse for <span class="math notranslate nohighlight">\(f\)</span>?
No!
If we look back at our argument above, we realize that it didn’t matter what <span class="math notranslate nohighlight">\(g\)</span> did on points outside of the interval <span class="math notranslate nohighlight">\([-1,1]\)</span>; indeed, another valid generalized inverse for <span class="math notranslate nohighlight">\(f\)</span> would be
\begin{equation*}
g_2(x) = \begin{cases}x^{1/3} &amp; \text{if } x\leq 1\ 500 &amp;\text{if } x&gt;1\end{cases}
\end{equation*}
Let’s implement this and verify again visually that <span class="math notranslate nohighlight">\(f\circ g_2 \circ f = f\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">g2</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="c1"># use this trick to compute the cube root in python: x^(1/3) = sign(x)*|x|^(1/3)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mf">3.</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">500</span>

<span class="n">fg2fx</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="n">g2</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xx</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">fg2fx</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;(f o g2 o f)(x)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/chap2_generalized-inverses_29_0.png" src="../_images/chap2_generalized-inverses_29_0.png" />
</div>
</div>
<p>As expected, the plot of <span class="math notranslate nohighlight">\(f\circ g_2 \circ f\)</span> is identical to the plot of <span class="math notranslate nohighlight">\(f\)</span>.</p>
<p>If we plotted <span class="math notranslate nohighlight">\(g_2 \circ f \circ g_2\)</span>, we would see that it equals <span class="math notranslate nohighlight">\(g_2\)</span>.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./10_Overview"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="chap2_surjective-functions-and-right-inverses.html" title="previous page"><span class="section-number">2.7. </span>Surjective Functions and Right Inverses</a>
    <a class='right-next' id="next-link" href="hw03.html" title="next page"><span class="section-number">2.9. </span>Homework 3</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Michael W. Mahoney, N. Benjamin Erichson and Ryan Theisen<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>